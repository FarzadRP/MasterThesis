
clear all
close all
clc


tic;% Start timer
t1=clock;
% fitnessfcn=@my_test_multi_3obj_0704
fitnessfcn=@iTrainEvaluateClassifierWithPrefilter
%% ---------------number of x-----------------------------------
nvars=48; 

% lb=0*ones(1,nvars);
% ub=10*ones(1,nvars);

% lb=[0.2117 0.2117 ...
%     0.0273 0.0273 ...
%     0.0704 0.0704 ...
%     1.3367 1.3367 ...
%     ];
% ub=[0.4966 0.4966 ...
%     0.5775 0.5775 ...
%     0.4940 0.4940 ...
%     7.8573 7.8573 ...
%     ];

% lb=[0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573...
%  ];

% lb=[0.2117 0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573 7.8573...
%  ];
% lb=[0.2117 0.2117 0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573 7.8573 7.8573...
%  ];

% lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273 0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704 0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367 1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775 0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940 0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573 7.8573 7.8573 7.8573...
%  ];
% lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573...
%  ];
% 
% lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573...
%  ];

% lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 ...
%     0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 ...
%     0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 ...
%     1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 ...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 ...
%     0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 ...
%     0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 ...
%     7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 ...
%  ];

% lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 ...
%     0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 ...
%     0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 ...
%     1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 ...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 ...
%     0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 ...
%     0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 ...
%     7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 ...
%  ];
% 
% lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117...
%     0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273...
%     0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704...
%     1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367...
%     ];
% ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966...
%     0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775...
%     0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940...
%     7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573...
%  ];

lb=[0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117 0.2117...
    0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273 0.0273...
    0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704 0.0704...
    1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367 1.3367...
    ];
ub=[0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966 0.4966...
    0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775 0.5775...
    0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940 0.4940...
    7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573 7.8573...
 ];

% lb=[0.2117 0.35415 ...
%     0.0273 0.3024 ...
%     0.0704 0.2822 ...
%     1.3367 4.5970 ...
%     ];
% ub=[0.35415 0.4966 ...
%     0.3024  0.5775 ...
%     0.2822  0.4940 ...
%     4.5970  7.8573 ...
%     ];

% lb=[0.2117 0.3066 0.4016...
%     0.0273 0.2107 0.3941...
%     0.0704 0.2116 0.3528...
%     1.3367 3.5102 5.6837...
%     ];
% 
% ub=[0.3066 0.4016 0.4966...
%     0.2107 0.3941 0.5775...
%     0.2116 0.3528 0.4940...
%     3.5102 5.6837 7.8573...
%     ];

% lb=[0.2117 0.282925 0.35415 0.425375...
%     0.0273 0.16485  0.3024  0.43995...
%     0.0704 0.1763   0.2822  0.3171...
%     1.3367 2.96685  4.5970  6.22715...
%     ];
% ub=[0.282925 0.35415  0.425375 0.4966...
%     0.16485  0.3024   0.43995  0.5775...
%     0.1763   0.2822   0.3881   0.4940...
%     2.96685  4.5970   6.22715  7.8573...
%  ];

% lb=[0.2117 0.26868 0.32566 0.38264 0.43962...
%     0.0273 0.13734 0.24738 0.35742 0.46746...
%     0.0704 0.15512 0.23984 0.32456 0.40928...
%     1.3367 2.64082 3.94494 5.24906 6.55318...
%     ];
% ub=[0.26868 0.32566 0.38264 0.43962 0.4966...
%     0.13734 0.24738 0.35742 0.46746 0.5775...
%     0.15512 0.23984 0.32456 0.40928 0.4940...
%     2.64082 3.94494 5.24906 6.55318 7.8573...
%     ];

% lb=[0.2117 0.25918 0.30666  0.35414  0.40162  0.44910...
%     0.0273 0.119   0.2107   0.3024   0.3941   0.4858...
%     0.0704 0.141   0.2116   0.2822   0.3528   0.4234...
%     1.3367 2.42346 3.510226 4.596956 5.683746 6.770506...
%     ];
% 
% ub=[0.25918 0.30666  0.35414  0.40162  0.44910  0.4966...
%     0.119   0.2107   0.3024   0.3941   0.4858   0.5775...
%     0.141   0.2116   0.2822   0.3528   0.4234   0.4940...
%     2.42346 3.510226 4.596956 5.683746 6.770506 7.8573...
%  ];

% lb=[0.2117 0.2524 0.2931 0.3338 0.3745 0.4152 0.4559...
%     0.0273 0.1059 0.1845 0.2631 0.3417 0.4203 0.4989...
%     0.0704 0.1309 0.1914 0.2519 0.3124 0.3729 0.4334...
%     1.3367 2.2682 3.1997 4.1312 5.0627 5.9942 6.9257...
%     ];
% 
% ub=[0.2524 0.2931 0.3338 0.3745 0.4152 0.4559 0.4966...
%     0.1059 0.1845 0.2631 0.3417 0.4203 0.4989 0.5775...
%     0.1309 0.1914 0.2519 0.3124 0.3729 0.4334 0.4940...
%     2.2682 3.1997 4.1312 5.0627 5.9942 6.9257 7.8573...
%  ];

% lb=[0.2117 0.2473 0.2829 0.3185 0.3541 0.3897 0.4253 0.4609...
%     0.0273 0.0960 0.1648 0.2336 0.3024 0.3711 0.4399 0.5087...
%     0.0704 0.1233 0.1763 0.2292 0.2822 0.3351 0.3881 0.4410...
%     1.3367 2.1517 2.9668 3.7819 4.5970 5.4120 6.2271 7.0422...
%     ];
% 
% ub=[0.2473 0.2829 0.3185 0.3541 0.3897 0.4253 0.4609 0.4966...
%     0.0960 0.1648 0.2336 0.3024 0.3711 0.4399 0.5087 0.5775...
%     0.1233 0.1763 0.2292 0.2822 0.3351 0.3881 0.4410 0.4940...
%     2.1517 2.9668 3.7819 4.5970 5.4120 6.2271 7.0422 7.8573...
%  ];

% lb=[0.2117 0.2433 0.2750 0.3066 0.3383 0.3699 0.4016 0.4332 0.4649 ...
%     0.0273 0.0884 0.1495 0.2106 0.2717 0.3328 0.3939 0.4550 0.5161 ...
%     0.0704 0.1174 0.1644 0.2114 0.2584 0.3054 0.3524 0.3994 0.4464 ...
%     1.3367 2.0612 2.7857 3.5102 4.2347 4.9592 5.6837 6.4082 7.1327 ...
%     ];
% ub=[0.2433 0.2750 0.3066 0.3383 0.3699 0.4016 0.4332 0.4649 0.4966 ...
%     0.0884 0.1495 0.2106 0.2717 0.3328 0.3939 0.4550 0.5161 0.5775 ...
%     0.1174 0.1644 0.2114 0.2584 0.3054 0.3524 0.3994 0.4464 0.4940 ...
%     2.0612 2.7857 3.5102 4.2347 4.9592 5.6837 6.4082 7.1327 7.8573 ...
%  ];

% lb=[0.2117 0.2401 0.2686 0.2971 0.3256 0.3541 0.3826 0.4111 0.4396 0.4681 ...
%     0.0273 0.0823 0.1373 0.1923 0.2473 0.3024 0.3574 0.4124 0.4674 0.5224 ...
%     0.0704 0.1127 0.1551 0.1974 0.2398 0.2822 0.3245 0.3669 0.4092 0.4516 ...
%     1.3367 1.9887 2.6407 3.2927 3.9447 4.5967 5.2487 5.9007 6.5576 7.2047 ...
%     ];
% ub=[0.2401 0.2686 0.2971 0.3256 0.3541 0.3826 0.4111 0.4396 0.4681 0.4966 ...
%     0.0823 0.1373 0.1923 0.2473 0.3024 0.3574 0.4124 0.4674 0.5224 0.5775 ...
%     0.1127 0.1551 0.1974 0.2398 0.2822 0.3245 0.3669 0.4092 0.4516 0.4940 ...
%     1.9887 2.6407 3.2927 3.9447 4.5967 5.2487 5.9007 6.5576 7.2047 7.8573 ...
%  ];

% lb=[0.2117 0.2376 0.2635 0.2894 0.3153 0.3412 0.3671 0.3930 0.4189 0.4448 0.4707...
%     0.0273 0.0773 0.1273 0.1773 0.2273 0.2773 0.3273 0.3773 0.4273 0.4773 0.5273...
%     0.0704 0.1089 0.1474 0.1859 0.2244 0.2629 0.3014 0.3399 0.3784 0.4169 0.4554...
%     1.3367 1.9294 2.5221 3.1148 3.7075 4.3002 4.8929 5.4856 6.0783 6.6710 7.2637...
%     ];
% ub=[0.2376 0.2635 0.2894 0.3153 0.3412 0.3671 0.3930 0.4189 0.4448 0.4707 0.4966...
%     0.0773 0.1273 0.1773 0.2273 0.2773 0.3273 0.3773 0.4273 0.4773 0.5273 0.5775...
%     0.1089 0.1474 0.1859 0.2244 0.2629 0.3014 0.3399 0.3784 0.4169 0.4554 0.4940...
%     1.9294 2.5221 3.1148 3.7075 4.3002 4.8929 5.4856 6.0783 6.6710 7.2637 7.8573...
%  ];


% lb=[0.2117 0.2354 0.2591 0.2829 0.3066 0.3304 0.3541 0.3778 0.4016 0.4253 0.4491 0.4728...
%     0.0273 0.0731 0.1190 0.1648 0.2107 0.2565 0.3024 0.3482 0.3941 0.4399 0.4858 0.5316...
%     0.0704 0.1057 0.1410 0.1763 0.2116 0.2469 0.2822 0.3175 0.3528 0.3881 0.4234 0.4587...
%     1.3367 1.8800 2.4234 2.9668 3.5102 4.0536 4.5969 5.1403 5.6837 6.2271 6.7705 7.3138...
%     ];
% ub=[0.2354 0.2591 0.2829 0.3066 0.3304 0.3541 0.3778 0.4016 0.4253 0.4491 0.4728 0.4966...
%     0.0731 0.1190 0.1648 0.2107 0.2565 0.3024 0.3482 0.3941 0.4399 0.4858 0.5316 0.5775...
%     0.1057 0.1410 0.1763 0.2116 0.2469 0.2822 0.3175 0.3528 0.3881 0.4234 0.4587 0.4940...
%     1.8800 2.4234 2.9668 3.5102 4.0536 4.5969 5.1403 5.6837 6.2271 6.7705 7.3138 7.8572...
%  ];


%%
A=[];
b=[];
Aeq=[];
beq=[];

options= gaoptimset('ParetoFraction', 0.5, 'PopulationSize', 100, 'Generations', 100, 'StallGenLimit', 100, 'TolFun', 1e-100, 'PlotFcns', {@gaplotpareto, @gaplotmaxconstr}, 'Display', 'diagnose', 'InitialPopulation', []); 

% rng default
[x, fval, exitflag, output, population, scores]=gamultiobj(fitnessfcn, nvars, A, b, Aeq, beq, lb, ub, options); %1e-100

save('x_classifier_1', 'x')
save('of_classifier_1', 'fval')
